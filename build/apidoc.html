<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/brianloveswords/node-jws#readme"

    >jws (v3.1.4)</a>
</h1>
<h4>Implementation of JSON Web Signatures</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.jws">module jws</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jws.createSign">
            function <span class="apidocSignatureSpan">jws.</span>createSign
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jws.createVerify">
            function <span class="apidocSignatureSpan">jws.</span>createVerify
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jws.data_stream">
            function <span class="apidocSignatureSpan">jws.</span>data_stream
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jws.decode">
            function <span class="apidocSignatureSpan">jws.</span>decode
            <span class="apidocSignatureSpan">(jwsSig, opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jws.isValid">
            function <span class="apidocSignatureSpan">jws.</span>isValid
            <span class="apidocSignatureSpan">(string)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jws.sign">
            function <span class="apidocSignatureSpan">jws.</span>sign
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jws.sign_stream">
            function <span class="apidocSignatureSpan">jws.</span>sign_stream
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jws.tostring">
            function <span class="apidocSignatureSpan">jws.</span>tostring
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jws.verify">
            function <span class="apidocSignatureSpan">jws.</span>verify
            <span class="apidocSignatureSpan">(jwsSig, algorithm, secretOrKey)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jws.verify_stream">
            function <span class="apidocSignatureSpan">jws.</span>verify_stream
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">jws.</span>ALGORITHMS</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">jws.</span>data_stream.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">jws.</span>sign_stream.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">jws.</span>verify_stream.prototype</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.jws.createSign">module jws.createSign</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jws.createSign.createSign">
            function <span class="apidocSignatureSpan">jws.</span>createSign
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.jws.createVerify">module jws.createVerify</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jws.createVerify.createVerify">
            function <span class="apidocSignatureSpan">jws.</span>createVerify
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.jws.data_stream">module jws.data_stream</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jws.data_stream.data_stream">
            function <span class="apidocSignatureSpan">jws.</span>data_stream
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jws.data_stream.super_">
            function <span class="apidocSignatureSpan">jws.data_stream.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.jws.data_stream.prototype">module jws.data_stream.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jws.data_stream.prototype.end">
            function <span class="apidocSignatureSpan">jws.data_stream.prototype.</span>end
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jws.data_stream.prototype.write">
            function <span class="apidocSignatureSpan">jws.data_stream.prototype.</span>write
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.jws.decode">module jws.decode</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jws.decode.decode">
            function <span class="apidocSignatureSpan">jws.</span>decode
            <span class="apidocSignatureSpan">(jwsSig, opts)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.jws.isValid">module jws.isValid</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jws.isValid.isValid">
            function <span class="apidocSignatureSpan">jws.</span>isValid
            <span class="apidocSignatureSpan">(string)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.jws.sign">module jws.sign</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jws.sign.sign">
            function <span class="apidocSignatureSpan">jws.</span>sign
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.jws.sign_stream">module jws.sign_stream</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jws.sign_stream.sign_stream">
            function <span class="apidocSignatureSpan">jws.</span>sign_stream
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jws.sign_stream.sign">
            function <span class="apidocSignatureSpan">jws.sign_stream.</span>sign
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jws.sign_stream.super_">
            function <span class="apidocSignatureSpan">jws.sign_stream.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.jws.sign_stream.prototype">module jws.sign_stream.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jws.sign_stream.prototype.sign">
            function <span class="apidocSignatureSpan">jws.sign_stream.prototype.</span>sign
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.jws.tostring">module jws.tostring</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jws.tostring.tostring">
            function <span class="apidocSignatureSpan">jws.</span>tostring
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.jws.verify">module jws.verify</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jws.verify.verify">
            function <span class="apidocSignatureSpan">jws.</span>verify
            <span class="apidocSignatureSpan">(jwsSig, algorithm, secretOrKey)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.jws.verify_stream">module jws.verify_stream</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jws.verify_stream.verify_stream">
            function <span class="apidocSignatureSpan">jws.</span>verify_stream
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jws.verify_stream.decode">
            function <span class="apidocSignatureSpan">jws.verify_stream.</span>decode
            <span class="apidocSignatureSpan">(jwsSig, opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jws.verify_stream.isValid">
            function <span class="apidocSignatureSpan">jws.verify_stream.</span>isValid
            <span class="apidocSignatureSpan">(string)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jws.verify_stream.super_">
            function <span class="apidocSignatureSpan">jws.verify_stream.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jws.verify_stream.verify">
            function <span class="apidocSignatureSpan">jws.verify_stream.</span>verify
            <span class="apidocSignatureSpan">(jwsSig, algorithm, secretOrKey)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.jws.verify_stream.prototype">module jws.verify_stream.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jws.verify_stream.prototype.verify">
            function <span class="apidocSignatureSpan">jws.verify_stream.prototype.</span>verify
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.jws" id="apidoc.module.jws">module jws</a></h1>


    <h2>
        <a href="#apidoc.element.jws.createSign" id="apidoc.element.jws.createSign">
        function <span class="apidocSignatureSpan">jws.</span>createSign
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createSign(opts) {
  return new SignStream(opts);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```js
{ header: { alg: &#x27;HS256&#x27; },
  payload: &#x27;h. jon benjamin&#x27;,
  signature: &#x27;YOWPewyGHKu4Y_0M_vtlEnNlqmFOclqp4Hy6hVHfFT4&#x27;
}
```

## jws.<span class="apidocCodeKeywordSpan">createSign</span>(options)
Returns a new SignStream object.

Options:

* `header` (required)
* `payload`
* `key` || `privateKey` || `secret`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jws.createVerify" id="apidoc.element.jws.createVerify">
        function <span class="apidocSignatureSpan">jws.</span>createVerify
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createVerify(opts) {
  return new VerifyStream(opts);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
privateKeyStream.pipe(signer.privateKey);
payloadStream.pipe(signer.payload);
signer.on(&#x27;done&#x27;, function(signature) {
  // ...
});
```

## jws.<span class="apidocCodeKeywordSpan">createVerify</span>(options)
Returns a new VerifyStream object.

Options:

* `signature`
* `algorithm`
* `key` || `publicKey` || `secret`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jws.data_stream" id="apidoc.element.jws.data_stream">
        function <span class="apidocSignatureSpan">jws.</span>data_stream
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function DataStream(data) {
  this.buffer = null;
  this.writable = true;
  this.readable = true;

  // No input
  if (!data) {
    this.buffer = Buffer.alloc(0);
    return this;
  }

  // Stream
  if (typeof data.pipe === &#x27;function&#x27;) {
    this.buffer = Buffer.alloc(0);
    data.pipe(this);
    return this;
  }

  // Buffer or String
  // or Object (assumedly a passworded key)
  if (data.length || typeof data === &#x27;object&#x27;) {
    this.buffer = data;
    this.writable = false;
    process.nextTick(function () {
      this.emit(&#x27;end&#x27;, data);
      this.readable = false;
      this.emit(&#x27;close&#x27;);
    }.bind(this));
    return this;
  }

  throw new TypeError(&#x27;Unexpected data type (&#x27;+ typeof data + &#x27;)&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jws.decode" id="apidoc.element.jws.decode">
        function <span class="apidocSignatureSpan">jws.</span>decode
        <span class="apidocSignatureSpan">(jwsSig, opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function jwsDecode(jwsSig, opts) {
  opts = opts || {};
  jwsSig = toString(jwsSig);

  if (!isValidJws(jwsSig))
    return null;

  var header = headerFromJWS(jwsSig);

  if (!header)
    return null;

  var payload = payloadFromJWS(jwsSig);
  if (header.typ === &#x27;JWT&#x27; || opts.json)
    payload = JSON.parse(payload, opts.encoding);

  return {
    header: header,
    payload: payload,
    signature: signatureFromJWS(jwsSig)
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
See above for a table of supported algorithms. `secretOrKey` is a string or
buffer containing either the secret for HMAC algorithms, or the PEM
encoded public key for RSA and ECDSA.

Note that the `&#x22;alg&#x22;` value from the signature header is ignored.


## jws.<span class="apidocCodeKeywordSpan">decode</span>(signature)

(Synchronous) Returns the decoded header, decoded payload, and signature
parts of the JWS Signature.

Returns an object with three properties, e.g.
```js
{ header: { alg: &#x27;HS256&#x27; },
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jws.isValid" id="apidoc.element.jws.isValid">
        function <span class="apidocSignatureSpan">jws.</span>isValid
        <span class="apidocSignatureSpan">(string)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isValidJws(string) {
  return JWS_REGEX.test(string) &#x26;&#x26; !!headerFromJWS(string);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jws.sign" id="apidoc.element.jws.sign">
        function <span class="apidocSignatureSpan">jws.</span>sign
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function jwsSign(opts) {
  var header = opts.header;
  var payload = opts.payload;
  var secretOrKey = opts.secret || opts.privateKey;
  var encoding = opts.encoding;
  var algo = jwa(header.alg);
  var securedInput = jwsSecuredInput(header, payload, encoding);
  var signature = algo.sign(securedInput, secretOrKey);
  return util.format(&#x27;%s.%s&#x27;, securedInput, signature);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
RS512 | RSASSA using SHA-512 hash algorithm
ES256 | ECDSA using P-256 curve and SHA-256 hash algorithm
ES384 | ECDSA using P-384 curve and SHA-384 hash algorithm
ES512 | ECDSA using P-521 curve and SHA-512 hash algorithm
none | No digital signature or MAC value included


## jws.<span class="apidocCodeKeywordSpan">sign</span>(options)

(Synchronous) Return a JSON Web Signature for a header and a payload.

Options:

* `header`
* `payload`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jws.sign_stream" id="apidoc.element.jws.sign_stream">
        function <span class="apidocSignatureSpan">jws.</span>sign_stream
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SignStream(opts) {
  var secret = opts.secret||opts.privateKey||opts.key;
  var secretStream = new DataStream(secret);
  this.readable = true;
  this.header = opts.header;
  this.encoding = opts.encoding;
  this.secret = this.privateKey = this.key = secretStream;
  this.payload = new DataStream(opts.payload);
  this.secret.once(&#x27;close&#x27;, function () {
    if (!this.payload.writable &#x26;&#x26; this.readable)
      this.sign();
  }.bind(this));

  this.payload.once(&#x27;close&#x27;, function () {
    if (!this.secret.writable &#x26;&#x26; this.readable)
      this.sign();
  }.bind(this));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jws.tostring" id="apidoc.element.jws.tostring">
        function <span class="apidocSignatureSpan">jws.</span>tostring
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function toString(obj) {
  if (typeof obj === &#x27;string&#x27;)
    return obj;
  if (typeof obj === &#x27;number&#x27; || Buffer.isBuffer(obj))
    return obj.toString();
  return JSON.stringify(obj);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jws.verify" id="apidoc.element.jws.verify">
        function <span class="apidocSignatureSpan">jws.</span>verify
        <span class="apidocSignatureSpan">(jwsSig, algorithm, secretOrKey)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function jwsVerify(jwsSig, algorithm, secretOrKey) {
  if (!algorithm) {
    var err = new Error(&#x22;Missing algorithm parameter for jws.verify&#x22;);
    err.code = &#x22;MISSING_ALGORITHM&#x22;;
    throw err;
  }
  jwsSig = toString(jwsSig);
  var signature = signatureFromJWS(jwsSig);
  var securedInput = securedInputFromJWS(jwsSig);
  var algo = jwa(algorithm);
  return algo.verify(securedInput, signature, secretOrKey);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
const signature = jws.sign({
  header: { alg: &#x27;HS256&#x27; },
  payload: &#x27;h. jon benjamin&#x27;,
  secret: &#x27;has a van&#x27;,
});
```

## jws.<span class="apidocCodeKeywordSpan">verify</span>(signature, algorithm, secretOrKey)

(Synchronous) Returns`true` or `false` for whether a signature matches a
secret or key.

`signature` is a JWS Signature. `header.alg` must be a value found in `jws.ALGORITHMS`.
See above for a table of supported algorithms. `secretOrKey` is a string or
buffer containing either the secret for HMAC algorithms, or the PEM
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jws.verify_stream" id="apidoc.element.jws.verify_stream">
        function <span class="apidocSignatureSpan">jws.</span>verify_stream
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function VerifyStream(opts) {
  opts = opts || {};
  var secretOrKey = opts.secret||opts.publicKey||opts.key;
  var secretStream = new DataStream(secretOrKey);
  this.readable = true;
  this.algorithm = opts.algorithm;
  this.encoding = opts.encoding;
  this.secret = this.publicKey = this.key = secretStream;
  this.signature = new DataStream(opts.signature);
  this.secret.once(&#x27;close&#x27;, function () {
    if (!this.signature.writable &#x26;&#x26; this.readable)
      this.verify();
  }.bind(this));

  this.signature.once(&#x27;close&#x27;, function () {
    if (!this.secret.writable &#x26;&#x26; this.readable)
      this.verify();
  }.bind(this));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>










</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.jws.createSign" id="apidoc.module.jws.createSign">module jws.createSign</a></h1>


    <h2>
        <a href="#apidoc.element.jws.createSign.createSign" id="apidoc.element.jws.createSign.createSign">
        function <span class="apidocSignatureSpan">jws.</span>createSign
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createSign(opts) {
  return new SignStream(opts);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```js
{ header: { alg: &#x27;HS256&#x27; },
  payload: &#x27;h. jon benjamin&#x27;,
  signature: &#x27;YOWPewyGHKu4Y_0M_vtlEnNlqmFOclqp4Hy6hVHfFT4&#x27;
}
```

## jws.<span class="apidocCodeKeywordSpan">createSign</span>(options)
Returns a new SignStream object.

Options:

* `header` (required)
* `payload`
* `key` || `privateKey` || `secret`
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.jws.createVerify" id="apidoc.module.jws.createVerify">module jws.createVerify</a></h1>


    <h2>
        <a href="#apidoc.element.jws.createVerify.createVerify" id="apidoc.element.jws.createVerify.createVerify">
        function <span class="apidocSignatureSpan">jws.</span>createVerify
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createVerify(opts) {
  return new VerifyStream(opts);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
privateKeyStream.pipe(signer.privateKey);
payloadStream.pipe(signer.payload);
signer.on(&#x27;done&#x27;, function(signature) {
  // ...
});
```

## jws.<span class="apidocCodeKeywordSpan">createVerify</span>(options)
Returns a new VerifyStream object.

Options:

* `signature`
* `algorithm`
* `key` || `publicKey` || `secret`
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.jws.data_stream" id="apidoc.module.jws.data_stream">module jws.data_stream</a></h1>


    <h2>
        <a href="#apidoc.element.jws.data_stream.data_stream" id="apidoc.element.jws.data_stream.data_stream">
        function <span class="apidocSignatureSpan">jws.</span>data_stream
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function DataStream(data) {
  this.buffer = null;
  this.writable = true;
  this.readable = true;

  // No input
  if (!data) {
    this.buffer = Buffer.alloc(0);
    return this;
  }

  // Stream
  if (typeof data.pipe === &#x27;function&#x27;) {
    this.buffer = Buffer.alloc(0);
    data.pipe(this);
    return this;
  }

  // Buffer or String
  // or Object (assumedly a passworded key)
  if (data.length || typeof data === &#x27;object&#x27;) {
    this.buffer = data;
    this.writable = false;
    process.nextTick(function () {
      this.emit(&#x27;end&#x27;, data);
      this.readable = false;
      this.emit(&#x27;close&#x27;);
    }.bind(this));
    return this;
  }

  throw new TypeError(&#x27;Unexpected data type (&#x27;+ typeof data + &#x27;)&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jws.data_stream.super_" id="apidoc.element.jws.data_stream.super_">
        function <span class="apidocSignatureSpan">jws.data_stream.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Stream() {
  EE.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.jws.data_stream.prototype" id="apidoc.module.jws.data_stream.prototype">module jws.data_stream.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.jws.data_stream.prototype.end" id="apidoc.element.jws.data_stream.prototype.end">
        function <span class="apidocSignatureSpan">jws.data_stream.prototype.</span>end
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function end(data) {
  if (data)
    this.write(data);
  this.emit(&#x27;end&#x27;, data);
  this.emit(&#x27;close&#x27;);
  this.writable = false;
  this.readable = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jws.data_stream.prototype.write" id="apidoc.element.jws.data_stream.prototype.write">
        function <span class="apidocSignatureSpan">jws.data_stream.prototype.</span>write
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function write(data) {
  this.buffer = Buffer.concat([this.buffer, Buffer.from(data)]);
  this.emit(&#x27;data&#x27;, data);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
DataStream.prototype.write = function write(data) {
  this.buffer = Buffer.concat([this.buffer, Buffer.from(data)]);
  this.emit(&#x27;data&#x27;, data);
};

DataStream.prototype.end = function end(data) {
  if (data)
    this.<span class="apidocCodeKeywordSpan">write</span>(data);
  this.emit(&#x27;end&#x27;, data);
  this.emit(&#x27;close&#x27;);
  this.writable = false;
  this.readable = false;
};

module.exports = DataStream;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.jws.decode" id="apidoc.module.jws.decode">module jws.decode</a></h1>


    <h2>
        <a href="#apidoc.element.jws.decode.decode" id="apidoc.element.jws.decode.decode">
        function <span class="apidocSignatureSpan">jws.</span>decode
        <span class="apidocSignatureSpan">(jwsSig, opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function jwsDecode(jwsSig, opts) {
  opts = opts || {};
  jwsSig = toString(jwsSig);

  if (!isValidJws(jwsSig))
    return null;

  var header = headerFromJWS(jwsSig);

  if (!header)
    return null;

  var payload = payloadFromJWS(jwsSig);
  if (header.typ === &#x27;JWT&#x27; || opts.json)
    payload = JSON.parse(payload, opts.encoding);

  return {
    header: header,
    payload: payload,
    signature: signatureFromJWS(jwsSig)
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
See above for a table of supported algorithms. `secretOrKey` is a string or
buffer containing either the secret for HMAC algorithms, or the PEM
encoded public key for RSA and ECDSA.

Note that the `&#x22;alg&#x22;` value from the signature header is ignored.


## jws.<span class="apidocCodeKeywordSpan">decode</span>(signature)

(Synchronous) Returns the decoded header, decoded payload, and signature
parts of the JWS Signature.

Returns an object with three properties, e.g.
```js
{ header: { alg: &#x27;HS256&#x27; },
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.jws.isValid" id="apidoc.module.jws.isValid">module jws.isValid</a></h1>


    <h2>
        <a href="#apidoc.element.jws.isValid.isValid" id="apidoc.element.jws.isValid.isValid">
        function <span class="apidocSignatureSpan">jws.</span>isValid
        <span class="apidocSignatureSpan">(string)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isValidJws(string) {
  return JWS_REGEX.test(string) &#x26;&#x26; !!headerFromJWS(string);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.jws.sign" id="apidoc.module.jws.sign">module jws.sign</a></h1>


    <h2>
        <a href="#apidoc.element.jws.sign.sign" id="apidoc.element.jws.sign.sign">
        function <span class="apidocSignatureSpan">jws.</span>sign
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function jwsSign(opts) {
  var header = opts.header;
  var payload = opts.payload;
  var secretOrKey = opts.secret || opts.privateKey;
  var encoding = opts.encoding;
  var algo = jwa(header.alg);
  var securedInput = jwsSecuredInput(header, payload, encoding);
  var signature = algo.sign(securedInput, secretOrKey);
  return util.format(&#x27;%s.%s&#x27;, securedInput, signature);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
RS512 | RSASSA using SHA-512 hash algorithm
ES256 | ECDSA using P-256 curve and SHA-256 hash algorithm
ES384 | ECDSA using P-384 curve and SHA-384 hash algorithm
ES512 | ECDSA using P-521 curve and SHA-512 hash algorithm
none | No digital signature or MAC value included


## jws.<span class="apidocCodeKeywordSpan">sign</span>(options)

(Synchronous) Return a JSON Web Signature for a header and a payload.

Options:

* `header`
* `payload`
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.jws.sign_stream" id="apidoc.module.jws.sign_stream">module jws.sign_stream</a></h1>


    <h2>
        <a href="#apidoc.element.jws.sign_stream.sign_stream" id="apidoc.element.jws.sign_stream.sign_stream">
        function <span class="apidocSignatureSpan">jws.</span>sign_stream
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SignStream(opts) {
  var secret = opts.secret||opts.privateKey||opts.key;
  var secretStream = new DataStream(secret);
  this.readable = true;
  this.header = opts.header;
  this.encoding = opts.encoding;
  this.secret = this.privateKey = this.key = secretStream;
  this.payload = new DataStream(opts.payload);
  this.secret.once(&#x27;close&#x27;, function () {
    if (!this.payload.writable &#x26;&#x26; this.readable)
      this.sign();
  }.bind(this));

  this.payload.once(&#x27;close&#x27;, function () {
    if (!this.secret.writable &#x26;&#x26; this.readable)
      this.sign();
  }.bind(this));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jws.sign_stream.sign" id="apidoc.element.jws.sign_stream.sign">
        function <span class="apidocSignatureSpan">jws.sign_stream.</span>sign
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function jwsSign(opts) {
  var header = opts.header;
  var payload = opts.payload;
  var secretOrKey = opts.secret || opts.privateKey;
  var encoding = opts.encoding;
  var algo = jwa(header.alg);
  var securedInput = jwsSecuredInput(header, payload, encoding);
  var signature = algo.sign(securedInput, secretOrKey);
  return util.format(&#x27;%s.%s&#x27;, securedInput, signature);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
RS512 | RSASSA using SHA-512 hash algorithm
ES256 | ECDSA using P-256 curve and SHA-256 hash algorithm
ES384 | ECDSA using P-384 curve and SHA-384 hash algorithm
ES512 | ECDSA using P-521 curve and SHA-512 hash algorithm
none | No digital signature or MAC value included


## jws.<span class="apidocCodeKeywordSpan">sign</span>(options)

(Synchronous) Return a JSON Web Signature for a header and a payload.

Options:

* `header`
* `payload`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jws.sign_stream.super_" id="apidoc.element.jws.sign_stream.super_">
        function <span class="apidocSignatureSpan">jws.sign_stream.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Stream() {
  EE.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.jws.sign_stream.prototype" id="apidoc.module.jws.sign_stream.prototype">module jws.sign_stream.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.jws.sign_stream.prototype.sign" id="apidoc.element.jws.sign_stream.prototype.sign">
        function <span class="apidocSignatureSpan">jws.sign_stream.prototype.</span>sign
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function sign() {
  try {
    var signature = jwsSign({
      header: this.header,
      payload: this.payload.buffer,
      secret: this.secret.buffer,
      encoding: this.encoding
    });
    this.emit(&#x27;done&#x27;, signature);
    this.emit(&#x27;data&#x27;, signature);
    this.emit(&#x27;end&#x27;);
    this.readable = false;
    return signature;
  } catch (e) {
    this.readable = false;
    this.emit(&#x27;error&#x27;, e);
    this.emit(&#x27;close&#x27;);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
RS512 | RSASSA using SHA-512 hash algorithm
ES256 | ECDSA using P-256 curve and SHA-256 hash algorithm
ES384 | ECDSA using P-384 curve and SHA-384 hash algorithm
ES512 | ECDSA using P-521 curve and SHA-512 hash algorithm
none | No digital signature or MAC value included


## jws.<span class="apidocCodeKeywordSpan">sign</span>(options)

(Synchronous) Return a JSON Web Signature for a header and a payload.

Options:

* `header`
* `payload`
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.jws.tostring" id="apidoc.module.jws.tostring">module jws.tostring</a></h1>


    <h2>
        <a href="#apidoc.element.jws.tostring.tostring" id="apidoc.element.jws.tostring.tostring">
        function <span class="apidocSignatureSpan">jws.</span>tostring
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function toString(obj) {
  if (typeof obj === &#x27;string&#x27;)
    return obj;
  if (typeof obj === &#x27;number&#x27; || Buffer.isBuffer(obj))
    return obj.toString();
  return JSON.stringify(obj);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.jws.verify" id="apidoc.module.jws.verify">module jws.verify</a></h1>


    <h2>
        <a href="#apidoc.element.jws.verify.verify" id="apidoc.element.jws.verify.verify">
        function <span class="apidocSignatureSpan">jws.</span>verify
        <span class="apidocSignatureSpan">(jwsSig, algorithm, secretOrKey)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function jwsVerify(jwsSig, algorithm, secretOrKey) {
  if (!algorithm) {
    var err = new Error(&#x22;Missing algorithm parameter for jws.verify&#x22;);
    err.code = &#x22;MISSING_ALGORITHM&#x22;;
    throw err;
  }
  jwsSig = toString(jwsSig);
  var signature = signatureFromJWS(jwsSig);
  var securedInput = securedInputFromJWS(jwsSig);
  var algo = jwa(algorithm);
  return algo.verify(securedInput, signature, secretOrKey);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
const signature = jws.sign({
  header: { alg: &#x27;HS256&#x27; },
  payload: &#x27;h. jon benjamin&#x27;,
  secret: &#x27;has a van&#x27;,
});
```

## jws.<span class="apidocCodeKeywordSpan">verify</span>(signature, algorithm, secretOrKey)

(Synchronous) Returns`true` or `false` for whether a signature matches a
secret or key.

`signature` is a JWS Signature. `header.alg` must be a value found in `jws.ALGORITHMS`.
See above for a table of supported algorithms. `secretOrKey` is a string or
buffer containing either the secret for HMAC algorithms, or the PEM
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.jws.verify_stream" id="apidoc.module.jws.verify_stream">module jws.verify_stream</a></h1>


    <h2>
        <a href="#apidoc.element.jws.verify_stream.verify_stream" id="apidoc.element.jws.verify_stream.verify_stream">
        function <span class="apidocSignatureSpan">jws.</span>verify_stream
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function VerifyStream(opts) {
  opts = opts || {};
  var secretOrKey = opts.secret||opts.publicKey||opts.key;
  var secretStream = new DataStream(secretOrKey);
  this.readable = true;
  this.algorithm = opts.algorithm;
  this.encoding = opts.encoding;
  this.secret = this.publicKey = this.key = secretStream;
  this.signature = new DataStream(opts.signature);
  this.secret.once(&#x27;close&#x27;, function () {
    if (!this.signature.writable &#x26;&#x26; this.readable)
      this.verify();
  }.bind(this));

  this.signature.once(&#x27;close&#x27;, function () {
    if (!this.secret.writable &#x26;&#x26; this.readable)
      this.verify();
  }.bind(this));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jws.verify_stream.decode" id="apidoc.element.jws.verify_stream.decode">
        function <span class="apidocSignatureSpan">jws.verify_stream.</span>decode
        <span class="apidocSignatureSpan">(jwsSig, opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function jwsDecode(jwsSig, opts) {
  opts = opts || {};
  jwsSig = toString(jwsSig);

  if (!isValidJws(jwsSig))
    return null;

  var header = headerFromJWS(jwsSig);

  if (!header)
    return null;

  var payload = payloadFromJWS(jwsSig);
  if (header.typ === &#x27;JWT&#x27; || opts.json)
    payload = JSON.parse(payload, opts.encoding);

  return {
    header: header,
    payload: payload,
    signature: signatureFromJWS(jwsSig)
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
See above for a table of supported algorithms. `secretOrKey` is a string or
buffer containing either the secret for HMAC algorithms, or the PEM
encoded public key for RSA and ECDSA.

Note that the `&#x22;alg&#x22;` value from the signature header is ignored.


## jws.<span class="apidocCodeKeywordSpan">decode</span>(signature)

(Synchronous) Returns the decoded header, decoded payload, and signature
parts of the JWS Signature.

Returns an object with three properties, e.g.
```js
{ header: { alg: &#x27;HS256&#x27; },
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jws.verify_stream.isValid" id="apidoc.element.jws.verify_stream.isValid">
        function <span class="apidocSignatureSpan">jws.verify_stream.</span>isValid
        <span class="apidocSignatureSpan">(string)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isValidJws(string) {
  return JWS_REGEX.test(string) &#x26;&#x26; !!headerFromJWS(string);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jws.verify_stream.super_" id="apidoc.element.jws.verify_stream.super_">
        function <span class="apidocSignatureSpan">jws.verify_stream.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Stream() {
  EE.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jws.verify_stream.verify" id="apidoc.element.jws.verify_stream.verify">
        function <span class="apidocSignatureSpan">jws.verify_stream.</span>verify
        <span class="apidocSignatureSpan">(jwsSig, algorithm, secretOrKey)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function jwsVerify(jwsSig, algorithm, secretOrKey) {
  if (!algorithm) {
    var err = new Error(&#x22;Missing algorithm parameter for jws.verify&#x22;);
    err.code = &#x22;MISSING_ALGORITHM&#x22;;
    throw err;
  }
  jwsSig = toString(jwsSig);
  var signature = signatureFromJWS(jwsSig);
  var securedInput = securedInputFromJWS(jwsSig);
  var algo = jwa(algorithm);
  return algo.verify(securedInput, signature, secretOrKey);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
const signature = jws.sign({
  header: { alg: &#x27;HS256&#x27; },
  payload: &#x27;h. jon benjamin&#x27;,
  secret: &#x27;has a van&#x27;,
});
```

## jws.<span class="apidocCodeKeywordSpan">verify</span>(signature, algorithm, secretOrKey)

(Synchronous) Returns`true` or `false` for whether a signature matches a
secret or key.

`signature` is a JWS Signature. `header.alg` must be a value found in `jws.ALGORITHMS`.
See above for a table of supported algorithms. `secretOrKey` is a string or
buffer containing either the secret for HMAC algorithms, or the PEM
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.jws.verify_stream.prototype" id="apidoc.module.jws.verify_stream.prototype">module jws.verify_stream.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.jws.verify_stream.prototype.verify" id="apidoc.element.jws.verify_stream.prototype.verify">
        function <span class="apidocSignatureSpan">jws.verify_stream.prototype.</span>verify
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function verify() {
  try {
    var valid = jwsVerify(this.signature.buffer, this.algorithm, this.key.buffer);
    var obj = jwsDecode(this.signature.buffer, this.encoding);
    this.emit(&#x27;done&#x27;, valid, obj);
    this.emit(&#x27;data&#x27;, valid);
    this.emit(&#x27;end&#x27;);
    this.readable = false;
    return valid;
  } catch (e) {
    this.readable = false;
    this.emit(&#x27;error&#x27;, e);
    this.emit(&#x27;close&#x27;);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
const signature = jws.sign({
  header: { alg: &#x27;HS256&#x27; },
  payload: &#x27;h. jon benjamin&#x27;,
  secret: &#x27;has a van&#x27;,
});
```

## jws.<span class="apidocCodeKeywordSpan">verify</span>(signature, algorithm, secretOrKey)

(Synchronous) Returns`true` or `false` for whether a signature matches a
secret or key.

`signature` is a JWS Signature. `header.alg` must be a value found in `jws.ALGORITHMS`.
See above for a table of supported algorithms. `secretOrKey` is a string or
buffer containing either the secret for HMAC algorithms, or the PEM
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
